#!/usr/bin/env fish

# By: @Iann-Zorkot
# Description: Script for automatic installation of pentesting tools on Arch Linux
# Usage: # fish ./arch-pentest-setup.sh

# Path to the current directory
set MY_DIR (pwd)

# Add BlackArch repository
function addBlackArch
	cd /tmp && curl -O https://blackarch.org/strap.sh && chmod +x strap.sh && sh ./strap.sh
	cd $MY_DIR
end

# Add MultiLib repository
function addMultiLib
	echo "[multilib]" >> /etc/pacman.conf && echo "Include = /etc/pacman.d/mirrorlist" >> /etc/pacman.conf
end

# Install penetration testing tools
function installTools
	# Install tools via Pacman
	pacman --noconfirm --disable-download-timeout -S go wget python-pip nmap sqlmap rustscan feroxbuster burpsuite wireshark-qt nikto hashcat john metasploit tcpdump gnu-netcat hydra waybackurls gau anewer meg qsreplace httprobe assetfinder gf dnsx ffuf gobuster gospider hakrawler httpx metabigor subfinder wafw00f dirb android-apktool secretfinder dalfox nuclei

	# Install FuzzingTool via Pip
	pip3 install FuzzingTool

	# Install SecLists
	mkdir /usr/share/wordlists
	cd /usr/share/wordlists
	git clone https://github.com/danielmiessler/SecLists.git
	cd $MY_DIR
end

# Main function
function main
    set_color -o brgreen
    echo " ▄▀▀█▄   ▄▀▀▄▀▀▀▄  ▄▀▀▀▀▄
▐ ▄▀ ▀▄ █   █   █ █ █   ▐
  █▄▄▄█ ▐  █▀▀▀▀     ▀▄
 ▄▀   █    █      ▀▄   █
█   ▄▀ ▄ ▄▀ ▄      █▀▀▀ ▄
▐   ▐   █          ▐
        ▐                 "
    echo "By: @Iann-Zorkot"
    echo \n

	set_color -o yellow ; echo "[!] This will take a while, do you want to proceed? [y/N]" ; set_color normal
	read -P "" answer

	if string match -qi "y" $answer
		if test (id -u) -ne 0
			set_color -o red ; echo "[!] You need to be root!" ; set_color normal
		else
			set_color -o green ; echo "[+] Adding repositories..." ; set_color normal
			addMultiLib
			addBlackArch
			set_color -o brgreen ; echo "[+] Installing tools..." ; set_color normal
			installTools
			set_color -o brgreen ; echo "[+] Finished =)" ; set_color normal
		end
	else
		set_color -o red ; echo "[!] Exiting... No installation done." ; set_color normal
	end
end

main
